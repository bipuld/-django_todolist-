{% extends 'base.html' %}

{% block title %}
 Todolist
{% endblock title %}

{% block body %}
{% if messages %}
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">
      {{ message }}
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  {% endfor %}
{% endif %}

{% comment %} input from option {% endcomment %}
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-lg-6">
      <form method="POST" action="{% url 'task' %}" class="animated fadeIn">
        {% csrf_token %}
        <div class="form-group">
          <input type="text" name="Task_name" class="form-control form-control-lg border-0" placeholder="New Task" style="border-radius: 25px; background-color: #f5f5f5;">
        </div>
        <div class="form-group">
          <select class="form-control form-control-lg border-0" id="effort" name="effort" style="border-radius: 25px; background-color: #f5f5f5;">
            <option value="Myself">Myself</option>
            <option value="Other">Other</option>
            <option value="Task">Task</option>
          </select>
        </div>      
        <div class="form-check"   >
          <input class="form-check-input" type="radio" name="status" value="completed" id="completed">
          <label class="form-check-label" for="completed">
            <span class="badge badge-success">Completed</span>
          </label>
        </div> 
        <div class="form-check">
          <input class="form-check-input" type="radio" name="status" value="incompleted" id="incompleted" checked>
          <label class="form-check-label" for="incompleted">
            <span class="badge badge-danger">Incomplete</span>
          </label>
        </div>
        <button type="submit" class="btn btn-lg btn-primary btn-block" style="border-radius: 25px; font-size: 18px; font-weight: bold;">Add Task</button>
      </form>
    </div>
  </div>
</div>

{% comment %} table-code {% endcomment %}
<section class="intro height-100vh mt-3">
  <div class="bg-image h-100">
    <div class="mask d-flex align-items-center h-100">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-12">
            <div class="card shadow">
              <div class="card-body p-0">
                <div class="table-responsive table-scroll" data-mdb-perfect-scrollbar="true" style="position: relative;">
                  <table class="table table-striped table-hover table-bordered mb-0">
                    <thead class="table-light">
                      <tr>
                        <th scope="col">Sno</th>
                        <th scope="col">Task</th>
                        <th scope="col">Effort</th>
                        <th scope="col">Status</th>
                        <th scope="col">Actions</th>
                      
                      </tr>
                    </thead>
                    <tbody>
                      {% for i in task %}
                        <tr>
                          <td>{{ i.id }}</td>
                          <td>{{ i.Task_name }}</td>
                          <td>{{ i.effort }}</td>
                          <td>
                            {% if i.status %}
                            <button type="button" class="btn btn-sm btn-success rounded-pill">
                              <i class="fas fa-check me-2"></i><a href={% url 'as_incompleted' i.id %} class="text-white fw-bold">Completed</a>
                            </button>
                            {% else %}
                          <button type="button" class="btn btn-sm btn-danger rounded-pill">
                            <i class="fas fa-times me-2"></i><a href={% url 'as_completed'  i.id %} class="text-white fw-bold">Incomplete</a>
                          </button>
                          {% endif %}
                          
                          </td>
                          <td>
                            <button type="submit" class="btn btn-sm btn-primary me-2 rounded-pill">
                              <i class="fas fa-edit"></i><a href="{% url 'edit' i.id %}" class="text-white fw-bold">Edit</a>
                            </button>
                            <button type="submit" class="btn btn-sm btn-danger rounded-pill" data-bs-toggle="modal" data-bs-target="#delete-modal">
                              <i class="fas fa-trash-alt"></i><a href={% url 'delete' i.id %} class="text-white fw-bold">Delete</a> 
                            </button>
                          </td>
                        </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{% comment %} pagination start here {% endcomment %}
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center mt-3">
    {% if task.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page=1" aria-label="First">
          <span aria-hidden="true">&laquo;</span>
          <span class="sr-only">First</span>
        </a>
      </li>
      <li class="page-item">
        <a class="page-link" href="?page={{ task.previous_page_number }}" aria-label="Previous">
          <span aria-hidden="true">&lsaquo;</span>
          <span class="sr-only">Previous</span>
        </a>
      </li>
    {% endif %}

    {% for i in task.paginator.page_range %}
      <li class="page-item {% if i == task.number %}active{% endif %}">
        <a class="page-link" href="?page={{ i }}">{{i}}</a>
      </li>
    {% endfor %}

    {% if task.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ task.next_page_number }}" aria-label="Next">
          <span aria-hidden="true">&rsaquo;</span>
          <span class="sr-only">Next</span>
        </a>
      </li>
      <li class="page-item">
        <a class="page-link" href="?page={{ task.paginator.num_pages }}" aria-label="Last">
          <span aria-hidden="true">&raquo;</span>
          <span class="sr-only">Last</span>
        </a>
      </li>
    {% endif %}
  </ul>
</nav>

{% endblock body %}
